import{b as D,u as E,r as i,f as M,j as e,S as _,aD as q,aE as Y,P as z,s as p}from"./index-BSh9mwyq.js";import{c as x}from"./clsx-B-dksMZM.js";import{h as O}from"./moment-C5S46NFB.js";import{B as h}from"./index-CvFY1qR1.js";import{M as P}from"./index-IB0XBheL.js";import{E as F}from"./index-BoQILPC2.js";import{E as T}from"./index-BoH4Dx3G.js";const G=()=>{const m=D(),j=E(),[o,g]=i.useState({notiId:"",email:"",question:""}),{notifications:n,loading:r}=M(t=>t.notiReducers),[w,d]=i.useState(!1),[b,u]=i.useState("<p></p> <p>Yours sincerely,</p> <p>Nguyen Anh Nhat</p>");i.useEffect(()=>{u("<p></p> <p>Yours sincerely,</p> <p>Nguyen Anh Nhat</p>")},[]);const y=(t,c,s)=>{g({notiId:t,email:c,question:s}),d(!0)},S=()=>{d(!1)},k=async t=>{m(q({questionId:t,answer:b,callback:{onSuccess:()=>{p.success("Answered has been sent!")},onFail:s=>{var l,a;p.error((a=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:a.message)}}})),d(!1)},v=t=>{m(Y({questionId:t,callback:{onSuccess:()=>{p.success("Notification deleted!")},onFail:s=>{var l,a;p.error((a=(l=s==null?void 0:s.response)==null?void 0:l.data)==null?void 0:a.message)}}}))},A=t=>{u(t)},C=t=>{j(`${z.ADMIN.NOTIFICATION.INDEX}/${t}`)};return e.jsxs("div",{className:"blogadmin-table relative w-full overflow-x-scroll",children:[e.jsxs(P,{width:700,open:w,handleOk:()=>k(o.notiId),handleCancel:S,title:"Answer questions",children:[e.jsxs("h3",{className:"mb-[8px] text-tag text-black-200",children:["Write answer to ",o.email," for post ",o.notiId]}),e.jsx("p",{children:o.question}),e.jsx("div",{className:"ckeditor",children:e.jsx(F,{handleChange:A,initialData:b,initialDataLoading:!1,itemSlug:o.notiId})})]}),r&&e.jsx("div",{className:"flex min-h-[170px] w-full items-center justify-center overflow-hidden rounded-[16px] border-[1px] border-black-100 bg-white",children:e.jsx(_,{})}),!r&&e.jsxs("table",{className:"relativ min-h-[170px] w-full border-collapse overflow-hidden rounded-[16px] border-[1px] border-black-100 bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-[1px] border-b-black-100",children:[e.jsx("th",{scope:"col",className:"text-nowrap px-[16px] py-[8px] text-center font-semibold capitalize text-black-100",colSpan:2,children:"Id"}),e.jsx("th",{scope:"col",className:"text-nowrap px-[16px] py-[8px] text-center font-semibold capitalize text-black-100",colSpan:2,children:"email"}),e.jsx("th",{scope:"col",className:"text-nowrap px-[16px] py-[8px] text-center font-semibold capitalize text-black-100",colSpan:2,children:"created at"}),e.jsx("th",{scope:"col",className:"text-nowrap px-[16px] py-[8px] text-center font-semibold capitalize text-black-100",colSpan:3,children:"question"}),e.jsx("th",{scope:"col",className:"text-nowrap px-[16px] py-[8px] text-center font-semibold capitalize text-black-100",colSpan:2,children:"status"})]})}),e.jsxs("tbody",{className:"relative",children:[!r&&(n==null?void 0:n.length)<1&&e.jsx("tr",{className:"border-[1px] border-black-100 odd:bg-white even:bg-blue-100",children:e.jsx("td",{colSpan:100,className:"px-[6px] py-[6px]",children:e.jsx(T,{description:"No notification found",className:"h-full w-full"})})}),n==null?void 0:n.map((t,c)=>{const{id:s,created_at:l,question:a,email:f,is_answer:N}=t||{},I=O(l).format("DD-MM-YYYY");return e.jsxs("tr",{className:x("border-[1px] border-black-100 odd:bg-white even:bg-blue-100"),children:[e.jsx("th",{scope:"row",children:s}),e.jsx("td",{colSpan:2,className:"px-[6px] py-[6px]",children:e.jsx("p",{className:"break-all text-center text-tag",children:f})}),e.jsx("td",{colSpan:2,className:"px-[6px] py-[6px]",children:e.jsx("p",{className:"text-center text-tag",children:I})}),e.jsx("td",{className:"px-[6px] py-[6px]",colSpan:4,children:e.jsx("p",{className:"text-justify text-tag",children:a})}),e.jsx("td",{colSpan:2,className:"px-[6px] py-[6px]",children:e.jsxs("div",{className:"flex flex-col gap-[4px]",children:[!N&&e.jsx(h,{onClick:()=>y(s,f,a),tailClasses:x("w-full h-[24px] hover:bg-green-200 bg-[rgba(2,122,72,0.8)]"),children:"Pending"}),N&&e.jsx(h,{onClick:()=>C(s),tailClasses:x("w-full h-[24px] hover:bg-gray-100 bg-gray-200"),children:"Answered"}),e.jsx(h,{onClick:()=>v(s),tailClasses:"w-full h-[24px] hover:bg-red-200 bg-[rgba(193,21,116,0.8)]",children:"Delete"})]})})]},s||c)})]})]})]})};export{G as default};
